From 77fe384ba5a4b62ed4e65b7fc8bd7bc0ccadc3f0 Mon Sep 17 00:00:00 2001
From: Otto Allmendinger <otto@bitgo.com>
Date: Thu, 3 Jul 2025 11:01:36 +0200
Subject: [PATCH] fix(babylonlabs-io-btc-staking-ts): update package metadata
 for BitGo fork

Update package name, version, and dependencies to support BitGo's fork of the
babylonlabs BTC staking library. Simplified build configuration and updated
Node.js version requirements.

Issue: BTC-2143

Co-authored-by: llm-git <llm-git@ttll.de>
---
 .../package.json                              | 55 +++++--------------
 1 file changed, 13 insertions(+), 42 deletions(-)

diff --git a/modules/babylonlabs-io-btc-staking-ts/package.json b/modules/babylonlabs-io-btc-staking-ts/package.json
index f3034eec2..34be5ad5b 100644
--- a/modules/babylonlabs-io-btc-staking-ts/package.json
+++ b/modules/babylonlabs-io-btc-staking-ts/package.json
@@ -1,20 +1,20 @@
 {
-  "name": "@babylonlabs-io/btc-staking-ts",
-  "version": "1.0.3",
+  "name": "@bitgo/babylonlabs-io-btc-staking-ts",
+  "version": "1.2.0",
   "description": "Library exposing methods for the creation and consumption of Bitcoin transactions pertaining to Babylon's Bitcoin Staking protocol.",
   "module": "dist/index.js",
   "main": "dist/index.cjs",
   "typings": "dist/index.d.ts",
   "type": "module",
+  "exports": {
+    "import": "./dist/index.js",
+    "require": "./dist/index.cjs"
+  },
   "scripts": {
-    "generate-types": "dts-bundle-generator -o ./dist/index.d.ts ./src/index.ts",
+    "generate-types": "dts-bundle-generator -o ./dist/index.d.cts ./src/index.ts --no-check",
     "build": "node build.js && npm run generate-types",
-    "format": "prettier --check \"src/**/*.ts\" \"tests/**/*.ts\"",
-    "format:fix": "prettier --write \"src/**/*.ts\" \"tests/**/*.ts\"",
-    "lint": "eslint ./src --fix",
     "prepare": "husky",
     "prepublishOnly": "npm run build",
-    "test": "jest --verbose",
     "version:canary": "npm version prerelease --preid=canary"
   },
   "files": [
@@ -27,51 +27,22 @@
     "btc-staking"
   ],
   "engines": {
-    "node": "22.3.0"
-  },
-  "husky": {
-    "hooks": {
-      "pre-commit": "lint-staged"
-    }
-  },
-  "lint-staged": {
-    "src/**/*.ts": [
-      "prettier --write",
-      "eslint --fix"
-    ],
-    "tests/**/*.ts": [
-      "prettier --write",
-      "eslint --fix"
-    ]
+    "node": ">=18 < 23"
   },
   "author": "Babylon Labs Ltd.",
   "license": "SEE LICENSE IN LICENSE",
   "devDependencies": {
-    "@types/jest": "^29.5.12",
-    "@types/node": "^20.11.30",
-    "@typescript-eslint/parser": "^7.4.0",
     "dts-bundle-generator": "^9.3.1",
-    "ecpair": "^2.1.0",
-    "esbuild": "^0.20.2",
-    "eslint": "^8.57.0",
-    "eslint-config-prettier": "^9.1.0",
-    "eslint-plugin-prettier": "^5.1.3",
-    "husky": "^9.0.11",
-    "jest": "^29.7.0",
-    "lint-staged": "^15.2.7",
-    "prettier": "^3.2.5",
-    "prettier-plugin-organize-imports": "^3.2.4",
-    "ts-jest": "^29.1.4",
-    "typescript": "^5.4.5",
-    "typescript-eslint": "^7.4.0"
+    "esbuild": "^0.20.2"
   },
   "dependencies": {
-    "@babylonlabs-io/babylon-proto-ts": "1.0.1",
+    "@babylonlabs-io/babylon-proto-ts": "1.0.0",
     "@bitcoin-js/tiny-secp256k1-asmjs": "2.2.3",
     "@cosmjs/encoding": "^0.33.0",
-    "bitcoinjs-lib": "6.1.5"
+    "bip174": "=2.1.1",
+    "bitcoinjs-lib": "^6.1.7"
   },
   "publishConfig": {
     "access": "public"
   }
-}
\ No newline at end of file
+}
-- 
2.43.0

